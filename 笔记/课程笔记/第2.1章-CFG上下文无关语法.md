---
date: 2025-10-07
---
CGF：context-free grammar

## 基本概念

### 1. 字母表

字母表 $\Sigma$ 是一个**有穷符号集合**

符号：字母、数字、标点符号、......

例如：
- 二进制字母表{0, 1}
- ASCII字符集
- Unicode字符集


#### 字母表上的运算

**乘积：**
$$
\Sigma_{1}\Sigma_{2}=\{ab | a\in \Sigma_{1},b\in \Sigma_{2}\}
$$
**n次幂：**
![[Pasted image 20251007213936.png]]
其中，$\{\epsilon\}$ 表示空串

**正闭包：**
所有正整数次幂的并集合
$$
\Sigma^{+}=\Sigma^1\cup \Sigma^2\cup\dots
$$

**克林闭包：**
在正闭包基础上再并上0次幂（添加空串）
$$
\Sigma^{*}=\Sigma^0 \cup \Sigma^+ =\Sigma^0 \cup\Sigma^1\cup \Sigma^2\cup\dots
$$

直观理解，克林闭包就是任意长度符号串构成的集合

### 2. 串
$\Sigma$ 是一个字母表，
对于
$$
\forall x\in \Sigma^*
$$
称 $x$ 为一个串。（字母表中符号的有穷序列）

#### 串上的运算

**连接：**
显而易见，两个穿拼接起来

特别的，若 $x=yz$，则称 $y, z$ 分别为 $x$ 的前缀、后缀

**幂运算：**
把连接视作乘法，幂运算就显而易见了


## 文法的形式化定义

$$
G=(V_{T},V_{N},P,S)
$$
其中，
-  $V_{T}$ 表示终结符（终结符有时也称token）集合，是文法定义的**基本符号**集合
- $V_{N}$ 表示非终结符集合，是**表示语法成分**的符号集合（注意，终结符集合与非终结符集合不相交，它们的并集称为文法符号集）
- $P$ 表示产生式集合，描述所有将终结符和非终结符组合成串的方法
	- 产生式一般形式：$\alpha\to \beta$
	- 其中，$\alpha \in (V_{T} \cup V_{N})^+, \beta\in (V_{T} \cup V_{N})^*$，$\alpha$ 中一定包含**非终结符**
- $S$ 表示开始符号，$S$ 是一个特殊的非终结符，表示该文法中**最大的语法成分**

![[Pasted image 20251008164659.png]]
约定：在不引起歧义的前提下可以**只用产生式表示**一个文法。


### 产生式的简写
![[Pasted image 20251008164824.png]]

### 符号约定

![[Pasted image 20251008164925.png]]

![[Pasted image 20251008164951.png]]
expression、term、factor

![[Pasted image 20251008165123.png]]


## 语言的定义

### 推导

若有 $\alpha\to \beta \in P$，那么可以将符号串 $\gamma \alpha \delta$ **重写（rewrite）** 为 $\gamma \beta \delta$，记作：
$$
\gamma \alpha \delta \implies \gamma \beta \delta
$$
这就称为 $\gamma \alpha \delta$ **直接推导**出 $\gamma \beta \delta$

n步推导：
![[Pasted image 20251008165817.png]]

直观上看，推导就是将成分越拆越细的过程，用产生式的**右部替换左部**


### 规约

推导的逆过程就是规约，用产生式的**左部替换右部**


有了文法(语言规则)，如何判定某一词串是否是该语言的句子?
- 句子的推导(派生)-从生成语言的角度
- 句子的归约-从识别语言的角度

### 句型和句子

若 $S\implies^*\alpha$，$\alpha$ 是文法符号集合的克林闭包（即由终结符和非终结符组合成的串，可以是空串），则称为**句型**

句子是特殊的句型，**没有非终结符**。

例子：
![[Pasted image 20251008171028.png]]

### 语言的形式化定义

由文法 $G$ 推导出的**所有句子**构成的集合称为**文法 $G$ 生成的语言**，记为 $L(G)$，即：
$$
L(G)=\{w|S\implies^*w, w\in V_T^*\}
$$

文法解决了无穷语言的有穷表示

例子：
![[Pasted image 20251008171523.png]]
L是字母，D是数字
根据生成式，T表示一个字母数字串
$S$ 是开始符号，由生成式可看出句子是一个**字母开头**、空串或字母数字串结尾的串。


### 语言上的运算

就是集合的运算：
![[Pasted image 20251008171745.png]]

## 文法的分类

### 0型文法

$$
\alpha\to \beta
$$
无限制文法/短语结构文法，$\alpha$ 中至少包含1个非终结符。

### 1型文法

上下文有关文法

### 2型文法

上下文无关文法（下面具体介绍）

### 3型文法

正则文法

右线性文法：$A\to wB, A\to w$
左线性文法：$A\to Bw, A\to w$
($w$ 是终结符号串)

### 四种文法的关系

限制逐级升高。
## 上下文无关文法

$$\forall \alpha\to \beta\in P, \alpha \in V_{N}$$
即上下文无关文法的**产生式左部**均为**非终结符**


### 分析树 
![[Pasted image 20251008230138.png]]
**根节点**是==开始符号==，内部节点表示对一个**产生式 $A\to \beta$ 的应用**，**叶子节点**可以是==终结符==也可以是==非终结符==

从左到右排序叶节点得到的符号串称为这棵树的**产出或边缘**
`-(id+id)`
### 二义性

若一个文法可以为一个句子生成多个分析树，则称这个文法具有二义性。

例子：
![[Pasted image 20251008230243.png]]
这里的红线部分可以看成S，而蓝线部分也可以看作一个S

消除二义性，可以添加额外规则、添加终结符

例如，上述例子中可以规定else只和最近的if配对，那么只保留前一棵分析树。

可以给出一组**充分条件**，满足这组条件的文法没有二义性。但无法判断不满足这组条件的文法有无二义性。