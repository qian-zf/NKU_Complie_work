---
date: 2025-11-16
---
## 递归的预测分析法

递归的预测分析法是指: 在递归下降分析中，编写**每一个非终结符对应的过程**时，根据**预测分析表**进行产生式的选择，从而实现对输入串的分析。

例子：
![[Pasted image 20251117110947.png]]
处理非终结符 `<PROGRAM>` 的过程如图所示，根据当前输入符号选择合适的产生式进行推导（依赖于Select集），依次进行匹配。

从例子中也可以看出，递归的预测分析法其实并不需要预测分析表，只需要Select集。
## 非递归的预测分析法

非递归的预测分析不需要为每个非终结符编写递归下降过程，而是**根据预测分析表构造一个自动机**，也叫表驱动的预测分析。

引入下推自动机，它可以处理[[第3.2章-有穷自动机（有限自动机）|有穷自动机]]无法应付的一些场景
![[Pasted image 20251117112423.png]]
如图中例子 $L=\{a^nb^n|n\geq1\}$，有穷自动机无法处理 $n$ 无穷多的情况。而下推自动机加入了一个栈结构，通过出入栈可以记录数量。

例子：
![[Pasted image 20251117112908.png]]
从图中可以看出，栈顶实际上就是最左符号，进行匹配时根据预测分析表选择非终结符和当前输入确定产生式，然后进行代换并输出。

本质上就使用栈结构代替原有的递归调用，可以减少函数递归的开销。

## 预测分析中的错误检测

两种情况可以检测错误：
- 栈顶的终结符和当前输入符号不匹配
- 栈顶非终结符与当前输入符号在预测分析表中没有对应项

解决方法：恐慌模式
忽略输入中的一些符号，直到输入中出现同步词法单元（synch）

例如，可以将Follow集的所有终结符设为同步此法单元：
![[Pasted image 20251117155708.png]]
- 遇到synch时，需要弹出**栈顶非终结符**，尝试分析后续的语法成分。
- 遇到空项时，需要**忽略输入符号**